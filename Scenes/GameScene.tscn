[gd_scene load_steps=22 format=3 uid="uid://bjukmj8c2wcpo"]

[ext_resource type="Script" path="res://Scripts/GameManager.gd" id="1_jj2c5"]
[ext_resource type="Texture2D" uid="uid://difk4td0dj5f2" path="res://Assets/grid.png" id="1_nse8l"]
[ext_resource type="Script" path="res://Scripts/Player/ClickEnvironment.gd" id="1_wh88n"]
[ext_resource type="PackedScene" uid="uid://dptcs77jneftx" path="res://Entities/president.tscn" id="2_ryh8r"]
[ext_resource type="Script" path="res://Scripts/Player/PerimeterManager.gd" id="4_bflj1"]
[ext_resource type="PackedScene" uid="uid://b7uvml1wafwnw" path="res://Entities/serviceman.tscn" id="4_ch8jo"]
[ext_resource type="Script" path="res://Scripts/Player/Force Field.gd" id="6_y3o43"]
[ext_resource type="PackedScene" uid="uid://cw417jfpsdh44" path="res://Entities/fence.tscn" id="7_bd5ae"]
[ext_resource type="PackedScene" uid="uid://dwnv2oi61t50y" path="res://Scenes/ui_manager.tscn" id="8_xc0yl"]
[ext_resource type="Script" path="res://Scripts/Enemy/Enemy Spawner.gd" id="10_e321x"]
[ext_resource type="AudioStream" uid="uid://c4d0srwj31qdb" path="res://Sound/presidentPRINT.wav" id="10_wueg0"]

[sub_resource type="ProceduralSkyMaterial" id="ProceduralSkyMaterial_afgvt"]
sky_top_color = Color(0.627451, 0.792157, 1, 1)
sky_horizon_color = Color(0, 0.619608, 0.627451, 1)
sky_curve = 0.023898
ground_bottom_color = Color(0.0117647, 0.184314, 0.298039, 1)
ground_horizon_color = Color(0, 0.619608, 0.654902, 1)
ground_curve = 0.171484

[sub_resource type="Sky" id="Sky_7jnkm"]
sky_material = SubResource("ProceduralSkyMaterial_afgvt")

[sub_resource type="Environment" id="Environment_gq8e6"]
background_mode = 2
sky = SubResource("Sky_7jnkm")

[sub_resource type="BoxShape3D" id="BoxShape3D_4y5le"]
size = Vector3(500, 1, 500)

[sub_resource type="QuadMesh" id="QuadMesh_252xs"]
size = Vector2(500, 500)

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_oo4o0"]
albedo_texture = ExtResource("1_nse8l")
uv1_scale = Vector3(50, 50, 50)
texture_filter = 2

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_v8tkb"]
transparency = 1
cull_mode = 2
albedo_color = Color(0, 0.615686, 0.878431, 0.490196)

[sub_resource type="ArrayMesh" id="ArrayMesh_lk0ef"]

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_fvkbq"]

[sub_resource type="ArrayMesh" id="ArrayMesh_i6ylv"]

[node name="Game Scene" type="Node3D"]
process_mode = 3
script = ExtResource("1_jj2c5")

[node name="Camera Position" type="Node3D" parent="."]
process_mode = 1

[node name="Camera3D" type="Camera3D" parent="Camera Position"]
transform = Transform3D(1, 0, 0, 0, 0.636078, 0.771624, 0, -0.771624, 0.636078, 0, 5.51, 6.735)
environment = SubResource("Environment_gq8e6")

[node name="Environment" type="Node3D" parent="."]
process_mode = 1
script = ExtResource("1_wh88n")

[node name="Area3D" type="Area3D" parent="Environment"]
top_level = true

[node name="CollisionShape3D" type="CollisionShape3D" parent="Environment/Area3D"]
shape = SubResource("BoxShape3D_4y5le")

[node name="Floor" type="StaticBody3D" parent="Environment"]
collision_priority = 2.0
input_ray_pickable = false

[node name="Floor Mesh" type="MeshInstance3D" parent="Environment/Floor"]
transform = Transform3D(1, 0, 0, 0, -4.37114e-08, 1, 0, -1, -4.37114e-08, 0, 0, 0)
mesh = SubResource("QuadMesh_252xs")
skeleton = NodePath("../../..")
surface_material_override/0 = SubResource("StandardMaterial3D_oo4o0")

[node name="CollisionShape3D" type="CollisionShape3D" parent="Environment/Floor"]
shape = SubResource("BoxShape3D_4y5le")

[node name="DirectionalLight3D" type="DirectionalLight3D" parent="Environment"]
transform = Transform3D(0.9151, -0.282489, 0.287734, 0, 0.713581, 0.700573, -0.403226, -0.641095, 0.652998, 0, 2.925, 0)

[node name="President" parent="." instance=ExtResource("2_ryh8r")]
process_mode = 1

[node name="Perimeter Manager" type="Node3D" parent="."]
process_mode = 1
script = ExtResource("4_bflj1")
camera_distance = 0.0

[node name="Serviceman A" parent="Perimeter Manager" instance=ExtResource("4_ch8jo")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 2, 0, -1)

[node name="Model" parent="Perimeter Manager/Serviceman A" index="0"]
transform = Transform3D(1, 0, 0, 0, 0.4, 0, 0, 0, 1, 0, 0, 0)

[node name="Armature" parent="Perimeter Manager/Serviceman A/Model" index="1"]
transform = Transform3D(0.01, 0, 0, 0, -4.37114e-10, -0.01, 0, 0.01, -4.37114e-10, 0, 0, 0)

[node name="Skeleton3D" parent="Perimeter Manager/Serviceman A/Model/Armature" index="0"]
bones/0/position = Vector3(5.51839, -0.213809, -144.137)
bones/0/rotation = Quaternion(-0.696029, 0.0232908, -0.0254363, 0.717184)
bones/1/rotation = Quaternion(-0.0216828, -0.00546374, -0.00499002, 0.999738)
bones/2/position = Vector3(1.54227e-07, 15.4738, 1.5199e-07)
bones/2/rotation = Quaternion(0.00377676, -0.0107332, -0.00426827, 0.999926)
bones/3/rotation = Quaternion(0.00377689, -0.0107332, -0.00426828, 0.999926)
bones/4/rotation = Quaternion(0.0522536, 0.00483359, 0.00239658, 0.998619)
bones/5/rotation = Quaternion(0.00403523, 0.00751246, 0.0326003, 0.999432)
bones/7/rotation = Quaternion(-0.683395, -0.312286, 0.526162, -0.39825)
bones/8/position = Vector3(2.56662e-06, 18.4349, -2.90794e-06)
bones/8/rotation = Quaternion(0.333475, -0.093125, -0.109835, 0.931696)
bones/9/position = Vector3(1.31599e-05, 29.3473, -2.36619e-06)
bones/9/rotation = Quaternion(0.115538, 0.167914, 0.344346, 0.916451)
bones/10/position = Vector3(-5.33903e-06, 36.3089, -3.58807e-06)
bones/10/rotation = Quaternion(0.0072252, 0.197378, -0.0473891, 0.979155)
bones/11/rotation = Quaternion(0.277842, -0.0238011, 0.246696, 0.928105)
bones/12/position = Vector3(0.392361, 6.17644, -2.17911e-06)
bones/12/rotation = Quaternion(-0.00862411, -0.00107533, -0.132159, 0.99119)
bones/13/rotation = Quaternion(-3.68205e-05, 0.000906691, 0.0318995, 0.999491)
bones/14/position = Vector3(-0.0346634, 3.99907, 4.57764e-06)
bones/15/rotation = Quaternion(0.304897, 0.0225949, 0.0915632, 0.947704)
bones/16/position = Vector3(0.0408768, 4.06573, 7.60414e-06)
bones/16/rotation = Quaternion(0.542426, -0.0109562, 0.0359268, 0.839264)
bones/17/rotation = Quaternion(-1.25672e-06, 0.000203206, 0.00225211, 0.999997)
bones/19/rotation = Quaternion(0.468335, -0.00829917, 0.116405, 0.87581)
bones/20/position = Vector3(0.00408783, 4.48147, -6.68896e-06)
bones/20/rotation = Quaternion(0.680943, -0.00490536, 0.0593795, 0.729909)
bones/21/position = Vector3(-0.00378113, 4.10799, -8.14014e-06)
bones/21/rotation = Quaternion(3.28134e-07, 2.34882e-05, 0.000415822, 1)
bones/22/position = Vector3(-0.000318909, 3.71256, -4.57765e-06)
bones/23/rotation = Quaternion(0.482582, -0.0707193, 0.0559154, 0.871198)
bones/24/rotation = Quaternion(0.699766, 0.00610084, 0.0360924, 0.713434)
bones/25/position = Vector3(0.00584259, 3.72449, -1.1124e-05)
bones/25/rotation = Quaternion(1.21969e-06, 8.40762e-05, 0.000965648, 1)
bones/26/position = Vector3(0.0115601, 3.30117, 7.62939e-07)
bones/27/rotation = Quaternion(0.558321, -0.118885, 0.0384554, 0.820162)
bones/28/rotation = Quaternion(0.641, 0.0235055, 0.0265, 0.766723)
bones/29/position = Vector3(0.0200607, 2.59004, -4.75414e-06)
bones/29/rotation = Quaternion(9.03759e-07, -8.54648e-05, -0.00711461, 0.999975)
bones/30/position = Vector3(-0.0142654, 2.20084, 1.02997e-05)
bones/31/rotation = Quaternion(0.646927, -0.337491, 0.593311, 0.339953)
bones/32/position = Vector3(4.41569e-08, 18.4349, -2.11022e-05)
bones/32/rotation = Quaternion(0.387999, 0.0763502, 0.154944, 0.905328)
bones/33/rotation = Quaternion(0.0268689, -0.140639, -0.165597, 0.975744)
bones/34/rotation = Quaternion(-0.111371, -0.147672, -0.117772, 0.975663)
bones/35/rotation = Quaternion(0.161329, 0.0641468, -0.26939, 0.947252)
bones/36/rotation = Quaternion(0.111906, -0.176176, 0.203309, 0.956611)
bones/37/position = Vector3(0.275327, 4.99563, -1.3728e-06)
bones/37/rotation = Quaternion(2.60399e-05, 0.000600325, -0.0112062, 0.999937)
bones/39/rotation = Quaternion(0.404852, 0.0115532, -0.0326348, 0.913727)
bones/40/rotation = Quaternion(0.598162, 0.0291207, -0.0306115, 0.800261)
bones/41/rotation = Quaternion(-3.71071e-07, 2.03929e-05, -0.000502152, 1)
bones/42/position = Vector3(0.0156563, 3.11525, 7.34329e-06)
bones/43/rotation = Quaternion(0.486826, 0.0280332, -0.0444321, 0.871917)
bones/44/rotation = Quaternion(0.63761, 0.0346464, -0.0419721, 0.768434)
bones/45/position = Vector3(0.00707169, 4.15616, -1.05904e-06)
bones/45/rotation = Quaternion(4.61905e-07, -2.49673e-05, -0.000269862, 1)
bones/46/position = Vector3(0.00427666, 3.68248, -4.00543e-06)
bones/47/rotation = Quaternion(0.465567, 0.00521131, -0.0525225, 0.883437)
bones/48/rotation = Quaternion(0.684786, -0.0171781, -0.0470396, 0.727022)
bones/49/position = Vector3(-0.00643654, 3.71429, -4.1825e-06)
bones/49/rotation = Quaternion(2.70208e-07, 3.37663e-05, 0.000499645, 1)
bones/51/rotation = Quaternion(0.434919, 0.00350414, -0.082046, 0.896717)
bones/52/rotation = Quaternion(0.726323, -0.0436229, -0.0556425, 0.683708)
bones/53/position = Vector3(-0.0110966, 2.65051, 5.12791e-08)
bones/53/rotation = Quaternion(3.19154e-07, 6.78654e-05, 0.0015928, 0.999999)
bones/54/position = Vector3(-0.00243187, 2.42439, 3.17097e-06)
bones/55/rotation = Quaternion(0.0917147, -0.00375796, 0.995778, -0.000484131)
bones/56/rotation = Quaternion(-0.13363, 0.142447, -0.0154263, 0.980619)
bones/57/position = Vector3(-1.97831e-06, 59.4305, 3.87254e-07)
bones/57/rotation = Quaternion(0.596622, 0.12147, 0.0502412, 0.791683)
bones/58/position = Vector3(1.7048e-06, 20.9766, -9.24534e-07)
bones/58/rotation = Quaternion(0.340433, -0.175145, 0.0606934, 0.921817)
bones/59/position = Vector3(1.62123e-06, 9.1876, -5.72242e-07)
bones/60/rotation = Quaternion(-0.0532405, 0.234135, 0.970567, 0.0185759)
bones/61/rotation = Quaternion(-0.351517, 0.0371021, -0.00790226, 0.935413)
bones/62/position = Vector3(7.20001e-09, 59.5236, -7.90597e-08)
bones/62/rotation = Quaternion(0.558087, -0.144018, -0.064615, 0.814631)
bones/63/position = Vector3(1.11137e-06, 22.0566, 1.35657e-06)
bones/63/rotation = Quaternion(0.351977, 0.142287, -0.0507112, 0.923739)
bones/64/position = Vector3(1.66898e-07, 9.29527, -4.52997e-07)

[node name="Serviceman B" parent="Perimeter Manager" instance=ExtResource("4_ch8jo")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 2)

[node name="Model" parent="Perimeter Manager/Serviceman B" index="0"]
transform = Transform3D(0.525, 0, 0, 0, 1, 0, 0, 0, 0.525, 0, 0, 0)

[node name="Skeleton3D" parent="Perimeter Manager/Serviceman B/Model/Armature" index="0"]
bones/0/position = Vector3(5.51839, -0.213809, -144.137)
bones/0/rotation = Quaternion(-0.696029, 0.0232908, -0.0254363, 0.717184)
bones/1/rotation = Quaternion(-0.0216828, -0.00546374, -0.00499002, 0.999738)
bones/2/position = Vector3(1.54227e-07, 15.4738, 1.5199e-07)
bones/2/rotation = Quaternion(0.00377676, -0.0107332, -0.00426827, 0.999926)
bones/3/rotation = Quaternion(0.00377689, -0.0107332, -0.00426828, 0.999926)
bones/4/rotation = Quaternion(0.0522536, 0.00483359, 0.00239658, 0.998619)
bones/5/rotation = Quaternion(0.00403523, 0.00751246, 0.0326003, 0.999432)
bones/7/rotation = Quaternion(-0.683395, -0.312286, 0.526162, -0.39825)
bones/8/position = Vector3(2.56662e-06, 18.4349, -2.90794e-06)
bones/8/rotation = Quaternion(0.333475, -0.093125, -0.109835, 0.931696)
bones/9/position = Vector3(1.31599e-05, 29.3473, -2.36619e-06)
bones/9/rotation = Quaternion(0.115538, 0.167914, 0.344346, 0.916451)
bones/10/position = Vector3(-5.33903e-06, 36.3089, -3.58807e-06)
bones/10/rotation = Quaternion(0.0072252, 0.197378, -0.0473891, 0.979155)
bones/11/rotation = Quaternion(0.277842, -0.0238011, 0.246696, 0.928105)
bones/12/position = Vector3(0.392361, 6.17644, -2.17911e-06)
bones/12/rotation = Quaternion(-0.00862411, -0.00107533, -0.132159, 0.99119)
bones/13/rotation = Quaternion(-3.68205e-05, 0.000906691, 0.0318995, 0.999491)
bones/14/position = Vector3(-0.0346634, 3.99907, 4.57764e-06)
bones/15/rotation = Quaternion(0.304897, 0.0225949, 0.0915632, 0.947704)
bones/16/position = Vector3(0.0408768, 4.06573, 7.60414e-06)
bones/16/rotation = Quaternion(0.542426, -0.0109562, 0.0359268, 0.839264)
bones/17/rotation = Quaternion(-1.25672e-06, 0.000203206, 0.00225211, 0.999997)
bones/19/rotation = Quaternion(0.468335, -0.00829917, 0.116405, 0.87581)
bones/20/position = Vector3(0.00408783, 4.48147, -6.68896e-06)
bones/20/rotation = Quaternion(0.680943, -0.00490536, 0.0593795, 0.729909)
bones/21/position = Vector3(-0.00378113, 4.10799, -8.14014e-06)
bones/21/rotation = Quaternion(3.28134e-07, 2.34882e-05, 0.000415822, 1)
bones/22/position = Vector3(-0.000318909, 3.71256, -4.57765e-06)
bones/23/rotation = Quaternion(0.482582, -0.0707193, 0.0559154, 0.871198)
bones/24/rotation = Quaternion(0.699766, 0.00610084, 0.0360924, 0.713434)
bones/25/position = Vector3(0.00584259, 3.72449, -1.1124e-05)
bones/25/rotation = Quaternion(1.21969e-06, 8.40762e-05, 0.000965648, 1)
bones/26/position = Vector3(0.0115601, 3.30117, 7.62939e-07)
bones/27/rotation = Quaternion(0.558321, -0.118885, 0.0384554, 0.820162)
bones/28/rotation = Quaternion(0.641, 0.0235055, 0.0265, 0.766723)
bones/29/position = Vector3(0.0200607, 2.59004, -4.75414e-06)
bones/29/rotation = Quaternion(9.03759e-07, -8.54648e-05, -0.00711461, 0.999975)
bones/30/position = Vector3(-0.0142654, 2.20084, 1.02997e-05)
bones/31/rotation = Quaternion(0.646927, -0.337491, 0.593311, 0.339953)
bones/32/position = Vector3(4.41569e-08, 18.4349, -2.11022e-05)
bones/32/rotation = Quaternion(0.387999, 0.0763502, 0.154944, 0.905328)
bones/33/rotation = Quaternion(0.0268689, -0.140639, -0.165597, 0.975744)
bones/34/rotation = Quaternion(-0.111371, -0.147672, -0.117772, 0.975663)
bones/35/rotation = Quaternion(0.161329, 0.0641468, -0.26939, 0.947252)
bones/36/rotation = Quaternion(0.111906, -0.176176, 0.203309, 0.956611)
bones/37/position = Vector3(0.275327, 4.99563, -1.3728e-06)
bones/37/rotation = Quaternion(2.60399e-05, 0.000600325, -0.0112062, 0.999937)
bones/39/rotation = Quaternion(0.404852, 0.0115532, -0.0326348, 0.913727)
bones/40/rotation = Quaternion(0.598162, 0.0291207, -0.0306115, 0.800261)
bones/41/rotation = Quaternion(-3.71071e-07, 2.03929e-05, -0.000502152, 1)
bones/42/position = Vector3(0.0156563, 3.11525, 7.34329e-06)
bones/43/rotation = Quaternion(0.486826, 0.0280332, -0.0444321, 0.871917)
bones/44/rotation = Quaternion(0.63761, 0.0346464, -0.0419721, 0.768434)
bones/45/position = Vector3(0.00707169, 4.15616, -1.05904e-06)
bones/45/rotation = Quaternion(4.61905e-07, -2.49673e-05, -0.000269862, 1)
bones/46/position = Vector3(0.00427666, 3.68248, -4.00543e-06)
bones/47/rotation = Quaternion(0.465567, 0.00521131, -0.0525225, 0.883437)
bones/48/rotation = Quaternion(0.684786, -0.0171781, -0.0470396, 0.727022)
bones/49/position = Vector3(-0.00643654, 3.71429, -4.1825e-06)
bones/49/rotation = Quaternion(2.70208e-07, 3.37663e-05, 0.000499645, 1)
bones/51/rotation = Quaternion(0.434919, 0.00350414, -0.082046, 0.896717)
bones/52/rotation = Quaternion(0.726323, -0.0436229, -0.0556425, 0.683708)
bones/53/position = Vector3(-0.0110966, 2.65051, 5.12791e-08)
bones/53/rotation = Quaternion(3.19154e-07, 6.78654e-05, 0.0015928, 0.999999)
bones/54/position = Vector3(-0.00243187, 2.42439, 3.17097e-06)
bones/55/rotation = Quaternion(0.0917147, -0.00375796, 0.995778, -0.000484131)
bones/56/rotation = Quaternion(-0.13363, 0.142447, -0.0154263, 0.980619)
bones/57/position = Vector3(-1.97831e-06, 59.4305, 3.87254e-07)
bones/57/rotation = Quaternion(0.596622, 0.12147, 0.0502412, 0.791683)
bones/58/position = Vector3(1.7048e-06, 20.9766, -9.24534e-07)
bones/58/rotation = Quaternion(0.340433, -0.175145, 0.0606934, 0.921817)
bones/59/position = Vector3(1.62123e-06, 9.1876, -5.72242e-07)
bones/60/rotation = Quaternion(-0.0532405, 0.234135, 0.970567, 0.0185759)
bones/61/rotation = Quaternion(-0.351517, 0.0371021, -0.00790226, 0.935413)
bones/62/position = Vector3(7.20001e-09, 59.5236, -7.90597e-08)
bones/62/rotation = Quaternion(0.558087, -0.144018, -0.064615, 0.814631)
bones/63/position = Vector3(1.11137e-06, 22.0566, 1.35657e-06)
bones/63/rotation = Quaternion(0.351977, 0.142287, -0.0507112, 0.923739)
bones/64/position = Vector3(1.66898e-07, 9.29527, -4.52997e-07)

[node name="Serviceman C" parent="Perimeter Manager" instance=ExtResource("4_ch8jo")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -2, 0, -1)

[node name="Force Field" type="Node3D" parent="."]
process_mode = 1
script = ExtResource("6_y3o43")

[node name="Force Field" type="MeshInstance3D" parent="Force Field"]
material_override = SubResource("StandardMaterial3D_v8tkb")
mesh = SubResource("ArrayMesh_lk0ef")
skeleton = NodePath("../..")

[node name="Fence" parent="Force Field/Force Field" node_paths=PackedStringArray("servicemanFrom", "servicemanTo") instance=ExtResource("7_bd5ae")]
transform = Transform3D(1, -1.43405e-16, 3.48787e-16, 3.48787e-16, 0.411154, -3.48787e-16, -3.48787e-16, 1.43405e-16, 1, 2.08165e-12, 2.08165e-12, 2.08165e-12)
material_override = SubResource("StandardMaterial3D_fvkbq")
mesh = SubResource("ArrayMesh_i6ylv")
skeleton = NodePath("../../../Perimeter Manager")
servicemanFrom = NodePath("../../../Perimeter Manager/Serviceman A")
servicemanTo = NodePath("../../../Perimeter Manager/Serviceman B")

[node name="Area3D" type="Area3D" parent="Force Field"]
input_ray_pickable = false

[node name="CollisionPolygon3D" type="CollisionPolygon3D" parent="Force Field/Area3D"]
transform = Transform3D(1, 0, 0, 0, -4.37114e-08, -1, 0, 1, -4.37114e-08, 0, 1.465, 0)
depth = 2.71
polygon = PackedVector2Array(2.445, 0, -2.495, 0, 3.82, 8.045)

[node name="UI Manager" parent="." instance=ExtResource("8_xc0yl")]

[node name="Enemy Spawner" type="Node3D" parent="."]
process_mode = 1
script = ExtResource("10_e321x")

[node name="AudioStreamPlayer" type="AudioStreamPlayer" parent="."]
stream = ExtResource("10_wueg0")
autoplay = true

[connection signal="input_event" from="Environment/Area3D" to="Environment" method="_on_area_3d_input_event"]
[connection signal="area_entered" from="Force Field/Area3D" to="Force Field" method="_on_area_3d_area_entered"]
[connection signal="body_entered" from="Force Field/Area3D" to="Force Field" method="_on_area_3d_body_entered"]
[connection signal="body_exited" from="Force Field/Area3D" to="Force Field" method="_on_area_3d_body_exited"]

[editable path="Perimeter Manager/Serviceman A"]
[editable path="Perimeter Manager/Serviceman B"]
